import{a as f,s as x}from"./index-B5-zJ3fb.js";import{s as g}from"./index-BVID-4ga.js";import{s as b}from"./index-C0c4r3D-.js";import{d as c,A as n,D as h,n as _,w as p,a as s,p as t,t as k,u as a,e as v,b as V,G as B,I as C,o as U}from"./index-i551c2DS.js";import{u as $}from"./auth-BNu_6ncn.js";import{s as M}from"./index-s69x-9WK.js";import{a as N}from"./index-Dq7h7Pqt.js";import{B as T}from"./BaseWrapper-C006pVb2.js";import"./index-CLFI1681.js";import"./index-InBU1k2x.js";import"./http-CaakouuI.js";import"./index-DGZg4k9-.js";const W={class:"login"},A={style:{margin:"0",padding:"0"}},L={style:{display:"flex","flex-flow":"row wrap",gap:"10px"}},P={style:{display:"flex","flex-flow":"row wrap",gap:"10px"}},S={style:{display:"flex","flex-flow":"row wrap",gap:"5px"}},j={style:{display:"flex","flex-flow":"row nowrap","justify-content":"right"}},X=c({__name:"WebmasterLogin",setup(z){const o=n(!1),u=$(),d=h(),i=n(""),r=n(""),y=B();C();const w=async()=>{if(i.value===""||r.value===""){d.add({severity:"error",summary:"Opss",detail:"Mohon isi semua bidang",life:3e3});return}o.value=!0;const m={email:i.value,password:r.value,role:"webmaster"};await N.post(v.baseEnd+"/auth/login/webmaster",m).then(e=>{e.status==200&&(u.setToken(e.data.token),u.setUserId(e.data.user.id),d.add({severity:"success",summary:"Success",detail:e.data.message,life:3e3}),o.value=!1,setTimeout(()=>{y.push("/")},2e3))}).catch(e=>{d.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3}),o.value=!1})};return(m,e)=>(U(),_(T,null,{default:p(()=>[s("div",W,[s("div",null,[s("div",null,[e[4]||(e[4]=s("h1",{style:{margin:"0",padding:"0","font-size":"40px"}},"Masuk",-1)),s("p",A,"untuk melanjutkan ke "+k(a(v).appName)+" sebagai Webmaster",1)]),s("div",L,[t(a(f),{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=l=>i.value=l),style:{width:"350px",padding:"12px"},placeholder:"E-Mail"},null,8,["modelValue"])]),s("div",P,[t(a(f),{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value=l),style:{width:"350px",padding:"12px"},type:"password",placeholder:"Password",minlength:"8"},null,8,["modelValue"])]),s("div",S,[t(a(g),{label:"Masuk sebagai Webmaster",onClick:w})])])]),t(a(M),{position:"bottom-right"}),t(a(x),{closable:!1,visible:o.value,"onUpdate:visible":e[3]||(e[3]=l=>o.value=l),modal:"",header:"Please wait",style:{width:"25rem"}},{default:p(()=>[e[6]||(e[6]=s("p",{style:{padding:"0","margin-top":"0px"}},"Authorizing...",-1)),t(a(b),{mode:"indeterminate",style:{height:"6px"}}),s("div",j,[t(a(g),{onClick:e[2]||(e[2]=l=>o.value=!1),style:{"margin-top":"1rem"}},{default:p(()=>e[5]||(e[5]=[V("Cancel")])),_:1,__:[5]})])]),_:1,__:[6]},8,["visible"])]),_:1}))}});export{X as default};
