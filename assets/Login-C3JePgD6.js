import{a as c,s as h}from"./index-DoPhsB5f.js";import{s as d}from"./index-DSDCaSKv.js";import{s as b}from"./index-BKq8yZtn.js";import{u as _}from"./auth-sEDrfsyJ.js";import{d as V,A as p,D as k,n as C,w as u,a as t,p as a,t as B,u as s,e as m,b as v,G as S,o as T}from"./index-Bfwd0VJS.js";import{a as A}from"./index-Dq7h7Pqt.js";import{B as U}from"./BaseWrapper-NlRyXq0c.js";import"./index-DtgK3Tkm.js";import"./index-B_kUtpKK.js";import"./http-BC9_0kAW.js";const N={class:"login"},P={style:{margin:"0",padding:"0"}},$={style:{display:"flex","flex-flow":"row wrap",gap:"10px"}},D={style:{display:"flex","flex-flow":"row wrap",gap:"10px"}},E={style:{display:"flex","flex-flow":"row wrap",gap:"5px"}},G={style:{display:"flex","flex-flow":"row nowrap","justify-content":"right"}},K=V({__name:"Login",setup(L){const l=p(!1),f=_(),r=k(),i=p(""),n=p(""),w=S(),y=async()=>{if(i.value===""||n.value===""){r.add({severity:"error",summary:"Alert!",detail:"Please fill all fields",life:3e3});return}l.value=!0;const g={email:i.value,password:n.value};await A.post(m.baseEnd+"/auth/login",g).then(e=>{e.status==200&&(f.setToken(e.data.token),f.setUserId(e.data.user.id),r.add({severity:"success",summary:"Success",detail:e.data.message,life:3e3}),l.value=!1,setTimeout(()=>{w.push("/")},2e3))}).catch(e=>{r.add({severity:"error",summary:"Failed",detail:e.response.data.message,life:3e3}),l.value=!1})},x=async()=>{window.location.href=m.baseEnd+"/auth/google"};return(g,e)=>(T(),C(U,null,{default:u(()=>[t("div",N,[e[6]||(e[6]=t("div",null,[t("img",{src:"https://cdn.prod.website-files.com/61a05ff14c09ecacc06eec05/61f59dd9cd87a7fb8076fd95_Best_Automatic_Transcription_Tools_Header-2.png",style:{width:"400px","border-radius":"10px"}})],-1)),t("div",null,[t("div",null,[e[4]||(e[4]=t("h1",{style:{margin:"0",padding:"0"}},"Sign-in",-1)),t("p",P,"to access "+B(s(m).appName),1)]),t("div",$,[a(s(c),{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),style:{width:"400px",padding:"12px"},placeholder:"E-Mail"},null,8,["modelValue"])]),t("div",D,[a(s(c),{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=o=>n.value=o),style:{width:"400px",padding:"12px"},type:"password",placeholder:"Password",minlength:"8"},null,8,["modelValue"])]),t("div",E,[a(s(d),{label:"Sign-in",onClick:y}),a(s(d),{class:"bt-outline",label:"Continue with Google",onClick:x})]),e[5]||(e[5]=t("p",null,[v("Doesn't have an account? "),t("a",{href:"?register=true&local=true",style:{color:"orange","text-decoration":"none","font-weight":"bold"}},"Sign-up now")],-1))])]),a(s(h),{closable:!1,visible:l.value,"onUpdate:visible":e[3]||(e[3]=o=>l.value=o),modal:"",header:"Please wait",style:{width:"25rem"}},{default:u(()=>[e[8]||(e[8]=t("p",{style:{padding:"0","margin-top":"0px"}},"Authorizing...",-1)),a(s(b),{mode:"indeterminate",style:{height:"6px"}}),t("div",G,[a(s(d),{onClick:e[2]||(e[2]=o=>l.value=!1),style:{"margin-top":"1rem"}},{default:u(()=>e[7]||(e[7]=[v("Cancel")])),_:1,__:[7]})])]),_:1,__:[8]},8,["visible"])]),_:1}))}});export{K as default};
